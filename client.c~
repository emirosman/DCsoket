#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <errno.h>

#define SUNUCUPORT 1234
#define SUNUCUIP "127.0.0.1"//"10.21.208.75"
#define AZAMIUZUNLUK 1024

int main()
{
    int sockfd;
    struct sockaddr_in serverAddr;
    char *gonder="hobaleleleleyyaa";
    char str[AZAMIUZUNLUK];
    int gelenBayt, gidenBayt, structSize;
    
    sockfd=socket(AF_INET,SOCK_STREAM,0);
    if(-1==sockfd)
    {perror("socket hata");}
    
    serverAddr.sin_family=AF_INET;
    serverAddr.sin_port=htons(SUNUCUPORT);
    serverAddr.sin_addr.s_addr=inet_addr(SUNUCUIP);
    memset(&(serverAddr.sin_zero),'\0',8);
    
    if(-1==connect(sockfd,(struct sockaddr *)&serverAddr,sizeof (struct sockaddr)))
    {perror("connect hata");}
    
    gidenBayt=send(sockfd,gonder,strlen(gonder),0);
    if(-1==gidenBayt)
    {perror("send hata");}
    else if (strlen(gonder) != gidenBayt)
    {printf("gönderilen giden eşit değil");}
    else 
    {printf("gönderdim %s",gonder);}
    
    gelenBayt=recv(sockfd,&str,AZAMIUZUNLUK-1,0);
    if(-1==gelenBayt)
    {perror("recv hata");}
    else if (0==gelenBayt)
    {printf("bağlantı koptu");}
    else
    {printf("msj alındı: %s",str);}
    
    close(sockfd);
    
}
